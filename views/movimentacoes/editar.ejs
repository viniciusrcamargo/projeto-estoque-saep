<%- include('../layouts/header.ejs', { titulo: 'Editar Movimentação' }) %>

<div class="produtos-container">
  <h2>Editar Movimentação <%= m.id_mov %></h2>
  <form method="POST" action="/movimentacoes/editar/<%= m.id_mov %>" class="form-cadastro-produto">
    <div class="form-row">
      <label for="id_produto">Produto:</label>
      <select id="id_produto" name="id_produto" required>
        <option value="">Selecione um produto</option>
        <% produtos.forEach(p => { %>
          <option value="<%= p.id_produto %>" <%= p.id_produto === m.id_produto ? 'selected' : '' %>>
            <%= p.nome_produto %>
          </option>
        <% }) %>
      </select>
    </div>

    <div class="form-row">
      <label for="tipo">Tipo:</label>
      <select id="tipo" name="tipo" required>
        <option value="E" <%= m.tipo === 'E' ? 'selected' : '' %>>Entrada</option>
        <option value="S" <%= m.tipo === 'S' ? 'selected' : '' %>>Saída</option>
      </select>
    </div>

    <div class="form-row">
      <label for="quantidade">Quantidade:</label>
      <input type="number" id="quantidade" name="quantidade" min="0" value="<%= m.quantidade %>" required>
    </div>

    <button type="submit" class="botao-cadastro">Salvar</button>
    <a href="/movimentacoes/listar" class="botao-voltar">Cancelar</a>
  </form>
</div>

<%- include('../layouts/footer.ejs') %>